
<div class="service-history-container service-history-list">
  <h1><%= title %></h1>

  <p>
    <a href="/service-history/<%= vehicle.inv_id %>/add" class="button-link">Add New Service Record</a>
  </p>

  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Description</th>
        <th>Cost</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% if (history.length) { %>
        <% history.forEach(record => { %>
          <tr>
            <td><%= record.service_date.toISOString().split("T")[0] %></td>
            <td><%= record.description %></td>
            <td>$<%= record.cost %></td>
            <td>
              <a href="/service-history/edit/<%= record.service_id %>" class="button-link">Edit</a>

              <form action="/service-history/delete" method="POST" style="display:inline;">
                <input type="hidden" name="service_id" value="<%= record.service_id %>">
                <input type="hidden" name="inv_id" value="<%= vehicle.inv_id %>">
                <button type="submit" onclick="return confirm('Delete this record?');" class="button-link" style="background-color: #e63946; border-radius: 25px; padding: 5px 12px; font-weight: 700; color: white; border: none; cursor: pointer;">
                  Delete
                </button>
              </form>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr><td colspan="4">No service history found.</td></tr>
      <% } %>
    </tbody>
  </table>
</div>

