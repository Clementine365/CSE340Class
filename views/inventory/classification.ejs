<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title><%= title ? title : 'Inventory' %></title>
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
  

  
  <div class="container">
    <main class="content-box">
      <h1><%= title ? title : 'Vehicle Inventory' %></h1>

      <!-- Flash notice (e.g., no inventory message) -->
      <% if (typeof messages !== 'undefined' && messages.notice) { %>
        <div class="notice"><%= messages.notice %></div>
      <% } %>

      <!-- Classification dropdown (optional) -->
      <% if (typeof classifications !== 'undefined') { %>
        <form>
          <label for="classificationSelect">Filter by classification:</label>
          <select name="classification_id" id="classificationSelect" onchange="redirectToClassification(this)">
            <option value="">-- Select Classification --</option>
            <% classifications.forEach(c => { %>
              <option value="<%= c.classification_id %>" <%= c.classification_id == classification_id ? 'selected' : '' %>>
                <%= c.classification_name %>
              </option>
            <% }) %>
          </select>
        </form>
      <% } %>

      <script>
        function redirectToClassification(select) {
          const id = select.value;
          if (id) {
            window.location.href = `/inv/type/${id}`;
          }
        }
      </script>

      <hr />

      <!-- Add Vehicle Link -->
      <p><a href="/inv/add-inventory" class="btn btn-primary">Add Vehicle</a></p>

      <!-- Inventory Grid -->
      <% if (grid) { %>
        <%- grid %>
      <% } else { %>
        <p>No inventory found in this classification.</p>
      <% } %>
    </main>

    <footer>
      <p>&copy; ACME Motors</p>
    </footer>
  </div>
</body>
</html>
